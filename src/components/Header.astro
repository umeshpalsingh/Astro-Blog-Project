---
const API_URL = import.meta.env.WORDPRESS_API_URL;

const query = `
{
  generalSettings {
    title
  }
  siteLogo
  menuItems(where: {location: PRIMARY}) {
    nodes {
      label
      uri
    }
  }
}
`;

const response = await fetch(API_URL, {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ query }),
});

const { data } = await response.json();
const siteTitle = data.generalSettings.title;
const logoUrl = data.siteLogo; // This is our new dynamic field
const menuItems = data.menuItems.nodes;
---

<!-- Header Section Starts -->
<header class="site-header">
  <div class="container">
    <div class="header-box">
      <div class="site-branding">
        <div class="header_logo">
          <a href="/">
            {
              logoUrl ? (
                <img src={logoUrl} alt={siteTitle} class="site-logo" />
              ) : (
                <strong>{siteTitle}</strong>
              )
            }
          </a>
        </div>
        <div id="toggler" class="mobile-toggle">
          <button class="hamburger hamburger-one"></button>
        </div>
      </div>
      <nav class="main-navigation">
        <ul class="menu-list">
          {
            menuItems.map((item) => (
              <li class="menu-item">
                <a href={item.uri}>{item.label}</a>
              </li>
            ))
          }
        </ul>
      </nav>
    </div>
  </div>
</header>
<div class="margin-top"></div>
